# Bug Radar â€” High-Signal Queries for Production Issues

## Locale & Formatting (i18n Bugs)
- `toLocaleDateString('en-US'` - Hard-coded locale
- `Intl.NumberFormat('en-US'` - Hard-coded number format
- `new Date().toLocaleString('en-US'` - Hard-coded date locale
- `toFixed(` - Currency formatting without locale
- `toUpperCase()` / `toLowerCase()` - Locale-insensitive case conversion (use `toLocaleUpperCase`)

## Navigation & SPA (Full Page Reload Bugs)
- `window.location.assign(` - Forces full page reload
- `window.location.href =` - Forces full page reload
- `window.location.reload()` - Unnecessary page refresh
- `<a href=` without router Link component

## Unsafe DOM / Injection (XSS Vulnerabilities)
- `dangerouslySetInnerHTML` - Potential XSS if not sanitized
- `innerHTML =` - Direct HTML injection
- `outerHTML =` - Direct HTML injection
- `document.write(` - Dangerous DOM manipulation
- `eval(` - Code injection vulnerability
- `Function(` - Code injection via function constructor
- `style={{ ... }}` with dynamic strings - CSS injection risk

## Hidden Technical Debt
- `TODO` - Unfinished work
- `FIXME` - Known issues
- `HACK` - Temporary workarounds
- `@ts-ignore` - Type safety bypassed
- `@ts-expect-error` - Expected errors (review if still valid)
- `eslint-disable` - Linting rules bypassed
- `any` - Type safety disabled

## Swallowed Errors (Silent Failures)
- `catch (e) {}` - Empty catch block
- `catch {}` - Empty catch block
- `.catch(() => {})` - Empty promise rejection handler
- `try { ... } catch { continue; }` - Error ignored in loop

## Typing / Logic Risks
- `: any` - Type safety disabled
- `as any` - Unsafe type casting
- `as unknown as` - Multi-step unsafe casting
- `!` (non-null assertion) - Potential null/undefined crash
- `// @ts-ignore` - Type checking disabled

## React Pitfalls (State & Effect Bugs)
- `useEffect(() => { ... }, [])` - Empty deps but uses props/state (stale closure)
- `useEffect` without cleanup function - Potential memory leaks
- `useState` with object mutation - State not updated (need spread or new object)
- `useRef` in render logic - Incorrect ref usage
- `useCallback` / `useMemo` with missing dependencies
- `setState` in render - Infinite render loop

## Zustand / State Management
- Direct mutation: `state.property =` - Should use `set()`
- `persist()` without `version` - No migration strategy
- `persist()` key change - Breaks existing user data
- Race conditions in async `set()` calls
- Derived state not using selectors - Performance issues

## API Validation (Security & Data Integrity)
- Missing request validation: no `zod` / `yup` schema
- Unhandled non-200 responses
- No timeout configuration
- Missing retry logic for transient failures
- No request cancellation (memory leaks)
- Unvalidated query parameters
- Missing CORS configuration
- No rate limiting

## Authentication & Authorization (Security Vulnerabilities)
- Hard-coded credentials / API keys
- Weak crypto: `Math.random()` for security tokens
- Missing auth checks before sensitive operations
- JWT without expiration validation
- Session tokens in localStorage (should be httpOnly cookies)
- Missing RBAC checks
- No rate limiting on auth endpoints

## Database & SQL (Injection & Performance)
- String interpolation in queries - SQL injection risk
- `${variable}` in SQL - SQL injection risk
- Missing query timeouts
- N+1 query patterns
- Missing indexes on frequently queried columns
- `SELECT *` in production code

## Performance Issues
- `O(n^2)` or worse time complexity in loops
- Blocking operations in main thread
- Synchronous file I/O
- Large data loaded at once (no pagination)
- Missing virtualization for long lists
- No debouncing/throttling on frequent events
- Unoptimized images (missing lazy loading)
- Bundle size: large dependencies not code-split

## Memory Leaks
- Event listeners not removed
- Intervals/timeouts not cleared
- Unsubscribed observables
- Large objects in closure scope
- Circular references
- DOM nodes not released

## Payments / Invoices (Financial Data Integrity)
- `toFixed()` for currency - Rounding errors
- Hard-coded currency code
- Missing decimal places for minor units
- No idempotency keys for payment requests
- Currency calculations with floating point
- Missing payment reconciliation logs
- No retry strategy for failed payments
- Missing audit trail

## Concurrency Issues (Race Conditions)
- Concurrent mutations without locks
- Missing transaction boundaries
- Optimistic updates without rollback
- Shared mutable state
- Missing debouncing on rapid user actions

## Error Handling
- Generic error messages - No actionable info
- Stack traces exposed to users
- PII in error logs
- No error tracking/monitoring integration
- Missing correlation/trace IDs
- No retry strategy for transient errors

## Testing Gaps
- No tests for error paths
- Missing edge case tests (null, undefined, empty)
- No integration tests for critical flows
- Missing load/stress tests
- No security tests (XSS, CSRF, injection)
- Flaky tests not addressed

## Configuration & Environment
- Secrets in source code
- Hard-coded environment-specific values
- Missing environment variable validation
- No fallback for missing config
- Production settings in development

## Observability Gaps
- Missing structured logging
- No distributed tracing
- Missing metrics for business-critical operations
- No alerts configured
- Logs contain PII
- Missing request/response logging for APIs
